<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ data.title }}</title>
    <link rel="manifest" href="/pwa/{{ data.appId }}/manifest.json">
    <link rel="apple-touch-icon" sizes="512x512" href="{{ data.icon }}">
    <link rel="icon" type="image/png" href="{{ data.icon }}" />
    <link href='/stylesheets/pwa.css' rel='stylesheet'/> 
  </head>
  <body>
    <header class="header">
      <h1 class="header__title">{{ data.title }}</h1>
      <div class="header__icons">
        <span class="header__icon"><svg role="img" xmlns="http://www.w3.org/2000/svg" width="26px" height="26px" viewBox="0 0 24 24" aria-labelledby="favouriteIconTitle" stroke="#2329D6" stroke-width="1" stroke-linecap="square" stroke-linejoin="miter" fill="none" color="#2329D6"> <title id="favouriteIconTitle">Favourite</title> <path d="M12,21 L10.55,19.7051771 C5.4,15.1242507 2,12.1029973 2,8.39509537 C2,5.37384196 4.42,3 7.5,3 C9.24,3 10.91,3.79455041 12,5.05013624 C13.09,3.79455041 14.76,3 16.5,3 C19.58,3 22,5.37384196 22,8.39509537 C22,12.1029973 18.6,15.1242507 13.45,19.7149864 L12,21 Z"/> </svg></span>
        <span class="header__icon"><svg role="img" xmlns="http://www.w3.org/2000/svg" width="28px" height="28px" viewBox="0 0 24 24" aria-labelledby="shareAndroidIconTitle" stroke="#2329D6" stroke-width="1" stroke-linecap="square" stroke-linejoin="miter" fill="none" color="#2329D6"> <title id="shareAndroidIconTitle">Share</title> <path d="M16 8L8 11 16 8zM16 16L8 13 16 16z"/> <circle cx="6" cy="12" r="2"/> <circle cx="18" cy="7" r="2"/> <circle cx="18" cy="17" r="2"/> </svg></span>
        <span class="header__icon"><svg width="28px" height="28px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-labelledby="appsAltIconTitle" stroke="#2329D6" stroke-width="1" stroke-linecap="square" stroke-linejoin="miter" fill="none" color="#2329D6"> <title id="appsAltIconTitle">Apps drawer</title> <rect x="5" y="5" width="2" height="2"/> <rect x="11" y="5" width="2" height="2"/> <rect x="17" y="5" width="2" height="2"/> <rect x="5" y="11" width="2" height="2"/> <rect x="11" y="11" width="2" height="2"/> <rect x="17" y="11" width="2" height="2"/> <rect x="5" y="17" width="2" height="2"/> <rect x="11" y="17" width="2" height="2"/> <rect x="17" y="17" width="2" height="2"/> </svg></span>
      </div>
    </header>
    <main class="main">
      <div class="card">
        <p class="card__text">Don't forget to install the Progressive Web App for a better detox!</p>
        <a href="" class="button">How to do it ?</a>
      </div>
      <div class="card">
        <p class="emoji">üôå</p>
        <p class="card__text"><strong>Well done you just didn't use {{ data.title }} once again!</strong></p>
      </div>
      <div class="card">
        <p class="card__text"><strong>You can now safely go back to your work!</strong></p>
      </div>
      <div class="card">
        <p class="emoji">‚ù§Ô∏è</p>
        <p>Like this App ? Donate to show your love</p>
        <a href="" class="button">Donate</a>
      </div>
      <div class="card">
        <p class="card__text">This project is open source, feel free to contribute</p>
        <a href="" class="button">Fork on Github</a>
      </div>
    </main>
    <footer class="footer">
    </footer>
    <script>
    'use strict';
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('/pwa/{{ data.appId }}/service-worker.js', { scope: '/pwa/{{ data.appId }}/' }).then(function(reg) {
          reg.onupdatefound = function() {
            var installingWorker = reg.installing;
            installingWorker.onstatechange = function() {
              switch (installingWorker.state) {
                case 'installed':
                  if (navigator.serviceWorker.controller) {
                    console.log('New or updated content is available.');
                  } else {
                    console.log('Content is now available offline!');
                  }
                  break;
                case 'redundant':
                  console.error('The installing service worker became redundant.');
                  break;
              }
            };
          };
        }).catch(function(e) {
          console.error('Error during service worker registration:', e);
        });
      });
    }
    </script>
  </body>
</html>